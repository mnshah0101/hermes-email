"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/sendEmail";
exports.ids = ["pages/api/sendEmail"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FsendEmail&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FsendEmail.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FsendEmail&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FsendEmail.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_sendEmail_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/sendEmail.js */ \"(api)/./pages/api/sendEmail.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_sendEmail_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_sendEmail_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/sendEmail\",\n        pathname: \"/api/sendEmail\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_sendEmail_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNlbmRFbWFpbCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGc2VuZEVtYWlsLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3FEO0FBQ3JEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxvREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsb0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVybWVzLWVtYWlsLz85YWNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvc2VuZEVtYWlsLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2VuZEVtYWlsXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2VuZEVtYWlsXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FsendEmail&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FsendEmail.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/sendEmail.js":
/*!********************************!*\
  !*** ./pages/api/sendEmail.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _src_models_Email__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/models/Email */ \"(api)/./src/models/Email.js\");\n/* harmony import */ var _src_models_User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/models/User */ \"(api)/./src/models/User.js\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        try {\n            await mongoose__WEBPACK_IMPORTED_MODULE_2___default().connect(process.env.MONGO_URI);\n            let { user_id, email_id, value } = req.body;\n            //find user\n            const user = await _src_models_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(user_id);\n            const email = await _src_models_Email__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findById(email_id);\n            if (!user || !email) {\n                console.log(\"user or email not found\");\n                res.status(400).json({\n                    error: \"User or Email not found\"\n                });\n                return;\n            }\n            if (user.org_email == \"\" || user.corporation_password == \"\") {\n                console.log(\"user not configured\");\n                res.status(400).json({\n                    error: \"User is not configured\"\n                });\n                return;\n            }\n            const transporter = nodemailer__WEBPACK_IMPORTED_MODULE_3___default().createTransport({\n                service: user.service,\n                auth: {\n                    user: user.org_email,\n                    pass: user.corporation_password\n                }\n            });\n            const sent_to = [];\n            for (let email_to_send of user.user_emails){\n                let mailOptions = {\n                    from: user.org_email,\n                    to: email_to_send.email,\n                    subject: email.subject,\n                    html: email.content\n                };\n                transporter.sendMail(mailOptions, function(error, info) {\n                    if (error) {} else {\n                        email.sent_to.push(email_to_send);\n                        email.save();\n                    }\n                });\n            }\n            email.sent = true;\n            //for each item in sent_to, push to email.sent_to\n            await email.save();\n            return res.status(200).json({\n                success: true\n            });\n        } catch (err) {\n            res.status(400).json({\n                error: err.message\n            });\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc2VuZEVtYWlsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEM7QUFDRjtBQUNWO0FBQ0k7QUFFckIsZUFBZUksUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzFDLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3ZCLElBQUc7WUFFUCxNQUFNTCx1REFBZ0IsQ0FBQ08sUUFBUUMsR0FBRyxDQUFDQyxTQUFTO1lBRzVDLElBQUksRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLEtBQUssRUFBRSxHQUFHVCxJQUFJVSxJQUFJO1lBRTNDLFdBQVc7WUFDWCxNQUFNQyxPQUFPLE1BQU1mLGlFQUFrQixDQUFDVztZQUN0QyxNQUFNTSxRQUFRLE1BQU1sQixrRUFBbUIsQ0FBQ2E7WUFFeEMsSUFBRyxDQUFDRyxRQUFRLENBQUNFLE9BQU07Z0JBQ2ZDLFFBQVFDLEdBQUcsQ0FBQztnQkFDWmQsSUFBSWUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBMEI7Z0JBQ3hEO1lBQ0o7WUFDQSxJQUFHUCxLQUFLUSxTQUFTLElBQUksTUFBTVIsS0FBS1Msb0JBQW9CLElBQUksSUFBRztnQkFDekROLFFBQVFDLEdBQUcsQ0FBQztnQkFFVmQsSUFBSWUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBeUI7Z0JBQ3ZEO1lBQ0o7WUFHQSxNQUFNRyxjQUFjdkIsaUVBQTBCLENBQUM7Z0JBQzNDeUIsU0FBU1osS0FBS1ksT0FBTztnQkFDckJDLE1BQU07b0JBQ0ZiLE1BQU1BLEtBQUtRLFNBQVM7b0JBQ3BCTSxNQUFNZCxLQUFLUyxvQkFBb0I7Z0JBQ25DO1lBQ0o7WUFFQSxNQUFNTSxVQUFVLEVBQUU7WUFFbEIsS0FBSSxJQUFJQyxpQkFBaUJoQixLQUFLaUIsV0FBVyxDQUFDO2dCQUN0QyxJQUFJQyxjQUFjO29CQUNkQyxNQUFNbkIsS0FBS1EsU0FBUztvQkFDcEJZLElBQUlKLGNBQWNkLEtBQUs7b0JBQ3ZCbUIsU0FBU25CLE1BQU1tQixPQUFPO29CQUN0QkMsTUFBTXBCLE1BQU1xQixPQUFPO2dCQUN2QjtnQkFDQ2IsWUFBWWMsUUFBUSxDQUFDTixhQUFhLFNBQVNYLEtBQUssRUFBRWtCLElBQUk7b0JBQ25ELElBQUlsQixPQUFPLENBQ1gsT0FBTzt3QkFDTEwsTUFBTWEsT0FBTyxDQUFDVyxJQUFJLENBQUNWO3dCQUNqQmQsTUFBTXlCLElBQUk7b0JBQ2Q7Z0JBQ0o7WUFDSjtZQUlBekIsTUFBTTBCLElBQUksR0FBRztZQUNiLGlEQUFpRDtZQUVqRCxNQUFNMUIsTUFBTXlCLElBQUk7WUFDaEIsT0FBT3JDLElBQUllLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUV1QixTQUFTO1lBQUs7UUFFaEQsRUFBRSxPQUFPQyxLQUFLO1lBRVZ4QyxJQUFJZSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPdUIsSUFBSUMsT0FBTztZQUFDO1FBQzlDO0lBR0E7QUFDSSIsInNvdXJjZXMiOlsid2VicGFjazovL2hlcm1lcy1lbWFpbC8uL3BhZ2VzL2FwaS9zZW5kRW1haWwuanM/MjAzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRW1haWxNb2RlbCBmcm9tICdAL3NyYy9tb2RlbHMvRW1haWwnO1xuaW1wb3J0IFVzZXJNb2RlbCBmcm9tICdAL3NyYy9tb2RlbHMvVXNlcic7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgIFxuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuTU9OR09fVVJJKTtcblxuXG4gICAgbGV0IHsgdXNlcl9pZCwgZW1haWxfaWQsIHZhbHVlIH0gPSByZXEuYm9keTtcblxuICAgIC8vZmluZCB1c2VyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJNb2RlbC5maW5kQnlJZCh1c2VyX2lkKTtcbiAgICBjb25zdCBlbWFpbCA9IGF3YWl0IEVtYWlsTW9kZWwuZmluZEJ5SWQoZW1haWxfaWQpO1xuXG4gICAgaWYoIXVzZXIgfHwgIWVtYWlsKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIG9yIGVtYWlsIG5vdCBmb3VuZFwiKVxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlVzZXIgb3IgRW1haWwgbm90IGZvdW5kXCIgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYodXNlci5vcmdfZW1haWwgPT0gXCJcIiB8fCB1c2VyLmNvcnBvcmF0aW9uX3Bhc3N3b3JkID09IFwiXCIpe1xuICAgICAgY29uc29sZS5sb2coXCJ1c2VyIG5vdCBjb25maWd1cmVkXCIpXG5cbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJVc2VyIGlzIG5vdCBjb25maWd1cmVkXCIgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cblxuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgICBzZXJ2aWNlOiB1c2VyLnNlcnZpY2UsXG4gICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgIHVzZXI6IHVzZXIub3JnX2VtYWlsLFxuICAgICAgICAgICAgcGFzczogdXNlci5jb3Jwb3JhdGlvbl9wYXNzd29yZFxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBzZW50X3RvID0gW107XG5cbiAgICBmb3IobGV0IGVtYWlsX3RvX3NlbmQgb2YgdXNlci51c2VyX2VtYWlscyl7XG4gICAgICAgIGxldCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZyb206IHVzZXIub3JnX2VtYWlsLFxuICAgICAgICAgICAgdG86IGVtYWlsX3RvX3NlbmQuZW1haWwsXG4gICAgICAgICAgICBzdWJqZWN0OiBlbWFpbC5zdWJqZWN0LFxuICAgICAgICAgICAgaHRtbDogZW1haWwuY29udGVudFxuICAgICAgICB9O1xuICAgICAgICAgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMsIGZ1bmN0aW9uKGVycm9yLCBpbmZvKXtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZW1haWwuc2VudF90by5wdXNoKGVtYWlsX3RvX3NlbmQpXG4gICAgICAgICAgICAgICAgZW1haWwuc2F2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBcblxuICAgIGVtYWlsLnNlbnQgPSB0cnVlO1xuICAgIC8vZm9yIGVhY2ggaXRlbSBpbiBzZW50X3RvLCBwdXNoIHRvIGVtYWlsLnNlbnRfdG9cbiAgICBcbiAgICBhd2FpdCBlbWFpbC5zYXZlKCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcblxufSBjYXRjaCAoZXJyKSB7XG5cbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTtcbn1cblxuICAgXG59XG4gICAgfSJdLCJuYW1lcyI6WyJFbWFpbE1vZGVsIiwiVXNlck1vZGVsIiwibW9uZ29vc2UiLCJub2RlbWFpbGVyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09fVVJJIiwidXNlcl9pZCIsImVtYWlsX2lkIiwidmFsdWUiLCJib2R5IiwidXNlciIsImZpbmRCeUlkIiwiZW1haWwiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwib3JnX2VtYWlsIiwiY29ycG9yYXRpb25fcGFzc3dvcmQiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwicGFzcyIsInNlbnRfdG8iLCJlbWFpbF90b19zZW5kIiwidXNlcl9lbWFpbHMiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJodG1sIiwiY29udGVudCIsInNlbmRNYWlsIiwiaW5mbyIsInB1c2giLCJzYXZlIiwic2VudCIsInN1Y2Nlc3MiLCJlcnIiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/sendEmail.js\n");

/***/ }),

/***/ "(api)/./src/models/Email.js":
/*!*****************************!*\
  !*** ./src/models/Email.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n // Import mongoose library\nconst Schema = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema); // Create a Schema\nconst EmailSchema = new Schema({\n    owner: {\n        type: Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    content: {\n        type: String,\n        required: false,\n        unique: false\n    },\n    sent: {\n        type: Boolean,\n        default: false\n    },\n    subject: {\n        type: String,\n        default: \"\"\n    },\n    date: {\n        type: Date,\n        default: Date.now\n    },\n    sent_to: [\n        {\n            type: Object\n        }\n    ],\n    opened: [\n        {\n            type: Object\n        }\n    ]\n});\nlet EmailModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Email || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Email\", EmailSchema); // Create a Email model\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EmailModel); // Export the Email model\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL0VtYWlsLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQyxDQUFDLDBCQUEwQjtBQUUzRCxNQUFNQyxTQUFTRCx3REFBZSxFQUFFLGtCQUFrQjtBQUlsRCxNQUFNRSxjQUFjLElBQUlELE9BQU87SUFDM0JFLE9BQU07UUFDRkMsTUFBTUgsT0FBT0ksS0FBSyxDQUFDQyxRQUFRO1FBQzNCQyxLQUFLO1FBQ0xDLFVBQVU7SUFDZDtJQUNBQyxTQUFTO1FBQ0xMLE1BQUtNO1FBQ0xGLFVBQVU7UUFDVkcsUUFBUTtJQUNaO0lBQ0FDLE1BQU07UUFDRlIsTUFBTVM7UUFDTkMsU0FBUztJQUNiO0lBQ0FDLFNBQVM7UUFDTFgsTUFBTU07UUFDTkksU0FBUztJQUNiO0lBQ0FFLE1BQU07UUFDRlosTUFBTWE7UUFDTkgsU0FBU0csS0FBS0MsR0FBRztJQUNyQjtJQUNBQyxTQUFTO1FBQ0w7WUFDSWYsTUFBTWdCO1FBQ1Y7S0FDSDtJQUNEQyxRQUFRO1FBQ0o7WUFDSWpCLE1BQU1nQjtRQUNWO0tBQ0g7QUFFTDtBQUtBLElBQUlFLGFBQWF0Qix3REFBZSxDQUFDd0IsS0FBSyxJQUFHeEIscURBQWMsQ0FBQyxTQUFTRSxjQUFjLHVCQUF1QjtBQUN0RyxpRUFBZW9CLFVBQVVBLEVBQUMsQ0FBQyx5QkFBeUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZXJtZXMtZW1haWwvLi9zcmMvbW9kZWxzL0VtYWlsLmpzP2NmYzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJzsgLy8gSW1wb3J0IG1vbmdvb3NlIGxpYnJhcnlcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hOyAvLyBDcmVhdGUgYSBTY2hlbWFcblxuXG5cbmNvbnN0IEVtYWlsU2NoZW1hID0gbmV3IFNjaGVtYSh7IC8vIENyZWF0ZSBhIEVtYWlsU2NoZW1hXG4gICAgb3duZXI6e1xuICAgICAgICB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICAgIHJlZjogJ1VzZXInLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgdHlwZTpTdHJpbmcsIFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIHVuaXF1ZTogZmFsc2VcbiAgICB9LFxuICAgIHNlbnQ6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9LFxuICAgIHN1YmplY3Q6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiBcIlwiXG4gICAgfSxcbiAgICBkYXRlOiB7XG4gICAgICAgIHR5cGU6IERhdGUsXG4gICAgICAgIGRlZmF1bHQ6IERhdGUubm93XG4gICAgfSxcbiAgICBzZW50X3RvOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IE9iamVjdFxuICAgICAgICB9XG4gICAgXSxcbiAgICBvcGVuZWQ6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogT2JqZWN0XG4gICAgICAgIH1cbiAgICBdXG4gICAgXG59KTtcblxuXG4gICAgXG5cbmxldCBFbWFpbE1vZGVsID0gbW9uZ29vc2UubW9kZWxzLkVtYWlsfHwgbW9uZ29vc2UubW9kZWwoJ0VtYWlsJywgRW1haWxTY2hlbWEpOyAvLyBDcmVhdGUgYSBFbWFpbCBtb2RlbFxuZXhwb3J0IGRlZmF1bHQgRW1haWxNb2RlbDsgLy8gRXhwb3J0IHRoZSBFbWFpbCBtb2RlbFxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiRW1haWxTY2hlbWEiLCJvd25lciIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwicmVxdWlyZWQiLCJjb250ZW50IiwiU3RyaW5nIiwidW5pcXVlIiwic2VudCIsIkJvb2xlYW4iLCJkZWZhdWx0Iiwic3ViamVjdCIsImRhdGUiLCJEYXRlIiwibm93Iiwic2VudF90byIsIk9iamVjdCIsIm9wZW5lZCIsIkVtYWlsTW9kZWwiLCJtb2RlbHMiLCJFbWFpbCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/models/Email.js\n");

/***/ }),

/***/ "(api)/./src/models/User.js":
/*!****************************!*\
  !*** ./src/models/User.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n // Import mongoose library\n // Import bcrypt library\nconst Schema = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema); // Create a Schema\nlet serviceValues = [\n    \"1und1\",\n    \"AOL\",\n    \"DebugMail.io\",\n    \"DynectEmail\",\n    \"FastMail\",\n    \"GandiMail\",\n    \"Gmail\",\n    \"Godaddy\",\n    \"GodaddyAsia\",\n    \"GodaddyEurope\",\n    \"hot.ee\",\n    \"Hotmail\",\n    \"iCloud\",\n    \"mail.ee\",\n    \"Mail.ru\",\n    \"Mailgun\",\n    \"Mailjet\",\n    \"Mandrill\",\n    \"Naver\",\n    \"Postmark\",\n    \"QQ\",\n    \"QQex\",\n    \"SendCloud\",\n    \"SendGrid\",\n    \"SES\",\n    \"Sparkpost\",\n    \"Yahoo\",\n    \"Yandex\",\n    \"Zoho\",\n    \"\"\n];\n//create a match function for the email\nconst UserSchema = new Schema({\n    username: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    password: {\n        type: String,\n        required: true,\n        unique: false\n    },\n    key: {\n        type: String,\n        required: false,\n        unique: false\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    org_email: {\n        type: String,\n        required: false,\n        unique: false\n    },\n    organization: {\n        type: String,\n        required: false,\n        unique: false\n    },\n    user_emails: [\n        {\n            type: Object\n        }\n    ],\n    corporation_password: {\n        type: String,\n        required: false,\n        unique: false,\n        default: \"\"\n    },\n    service: {\n        type: String,\n        enum: serviceValues,\n        default: \"\"\n    },\n    logo: {\n        type: String,\n        default: \"\"\n    }\n});\nUserSchema.methods.matchPassword = async function(enteredPassword) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(enteredPassword, this.password);\n};\nlet UserModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", UserSchema); // Create a User model\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserModel); // Export the User model\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL1VzZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0MsQ0FBQywwQkFBMEI7QUFDN0IsQ0FBQyx3QkFBd0I7QUFDdkQsTUFBTUUsU0FBU0Ysd0RBQWUsRUFBRSxrQkFBa0I7QUFFbEQsSUFBSUcsZ0JBQWdCO0lBQ2hCO0lBQVM7SUFBTztJQUFnQjtJQUFlO0lBQVk7SUFDM0Q7SUFBUztJQUFXO0lBQWU7SUFBaUI7SUFBVTtJQUM5RDtJQUFVO0lBQVc7SUFBVztJQUFXO0lBQVc7SUFBWTtJQUNsRTtJQUFZO0lBQU07SUFBUTtJQUFhO0lBQVk7SUFBTztJQUMxRDtJQUFTO0lBQVU7SUFBUTtDQUM5QjtBQUVELHVDQUF1QztBQUd2QyxNQUFNQyxhQUFhLElBQUlGLE9BQU87SUFDMUJHLFVBQVU7UUFDTkMsTUFBS0M7UUFDTEMsVUFBVTtRQUNWQyxRQUFRO0lBQ1o7SUFDQUMsVUFBVTtRQUNOSixNQUFLQztRQUNMQyxVQUFVO1FBQ1ZDLFFBQVE7SUFDWjtJQUNBRSxLQUFJO1FBQ0FMLE1BQUtDO1FBQ0xDLFVBQVU7UUFDVkMsUUFBUTtJQUNaO0lBQ0FHLE9BQU87UUFDSE4sTUFBS0M7UUFDTEMsVUFBVTtRQUNWQyxRQUFRO0lBQ1o7SUFDQUksV0FBVztRQUNQUCxNQUFLQztRQUNMQyxVQUFVO1FBQ1ZDLFFBQVE7SUFDWjtJQUNBSyxjQUFjO1FBQ1ZSLE1BQUtDO1FBQ0xDLFVBQVU7UUFDVkMsUUFBUTtJQUNaO0lBQ0FNLGFBQVk7UUFDUjtZQUNJVCxNQUFLVTtRQUNUO0tBQ0g7SUFDREMsc0JBQXNCO1FBQ2xCWCxNQUFLQztRQUNMQyxVQUFVO1FBQ1ZDLFFBQVE7UUFDUlMsU0FBUztJQUNiO0lBQ0RDLFNBQVM7UUFDSmIsTUFBTUM7UUFDTmEsTUFBTWpCO1FBQ05lLFNBQVM7SUFDYjtJQUNBRyxNQUFNO1FBQ0ZmLE1BQU1DO1FBQ05XLFNBQVM7SUFDYjtBQUNKO0FBRUFkLFdBQVdrQixPQUFPLENBQUNDLGFBQWEsR0FBRyxlQUFnQkMsZUFBZTtJQUM5RCxPQUFPLE1BQU12Qix1REFBYyxDQUFDdUIsaUJBQWlCLElBQUksQ0FBQ2QsUUFBUTtBQUMxRDtBQUdKLElBQUlnQixZQUFZMUIsd0RBQWUsQ0FBQzRCLElBQUksSUFBRzVCLHFEQUFjLENBQUMsUUFBUUksYUFBYSxzQkFBc0I7QUFDakcsaUVBQWVzQixTQUFTQSxFQUFDLENBQUMsd0JBQXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVybWVzLWVtYWlsLy4vc3JjL21vZGVscy9Vc2VyLmpzPzdkMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJzsgLy8gSW1wb3J0IG1vbmdvb3NlIGxpYnJhcnlcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnOyAvLyBJbXBvcnQgYmNyeXB0IGxpYnJhcnlcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTsgLy8gQ3JlYXRlIGEgU2NoZW1hXG5cbmxldCBzZXJ2aWNlVmFsdWVzID0gW1xuICAgIFwiMXVuZDFcIiwgXCJBT0xcIiwgXCJEZWJ1Z01haWwuaW9cIiwgXCJEeW5lY3RFbWFpbFwiLCBcIkZhc3RNYWlsXCIsIFwiR2FuZGlNYWlsXCIsIFxuICAgIFwiR21haWxcIiwgXCJHb2RhZGR5XCIsIFwiR29kYWRkeUFzaWFcIiwgXCJHb2RhZGR5RXVyb3BlXCIsIFwiaG90LmVlXCIsIFwiSG90bWFpbFwiLCBcbiAgICBcImlDbG91ZFwiLCBcIm1haWwuZWVcIiwgXCJNYWlsLnJ1XCIsIFwiTWFpbGd1blwiLCBcIk1haWxqZXRcIiwgXCJNYW5kcmlsbFwiLCBcIk5hdmVyXCIsIFxuICAgIFwiUG9zdG1hcmtcIiwgXCJRUVwiLCBcIlFRZXhcIiwgXCJTZW5kQ2xvdWRcIiwgXCJTZW5kR3JpZFwiLCBcIlNFU1wiLCBcIlNwYXJrcG9zdFwiLCBcbiAgICBcIllhaG9vXCIsIFwiWWFuZGV4XCIsIFwiWm9ob1wiLCAnJ1xuXTtcblxuLy9jcmVhdGUgYSBtYXRjaCBmdW5jdGlvbiBmb3IgdGhlIGVtYWlsXG5cblxuY29uc3QgVXNlclNjaGVtYSA9IG5ldyBTY2hlbWEoeyAvLyBDcmVhdGUgYSBVc2VyU2NoZW1hXG4gICAgdXNlcm5hbWU6IHtcbiAgICAgICAgdHlwZTpTdHJpbmcsIFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlXG4gICAgfSxcbiAgICBwYXNzd29yZDoge1xuICAgICAgICB0eXBlOlN0cmluZywgXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB1bmlxdWU6IGZhbHNlXG4gICAgfSxcbiAgICBrZXk6e1xuICAgICAgICB0eXBlOlN0cmluZywgXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgdW5pcXVlOiBmYWxzZVxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgICAgdHlwZTpTdHJpbmcsIFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlOiB0cnVlXG4gICAgfSxcbiAgICBvcmdfZW1haWw6IHtcbiAgICAgICAgdHlwZTpTdHJpbmcsIFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIHVuaXF1ZTogZmFsc2VcbiAgICB9LFxuICAgIG9yZ2FuaXphdGlvbjoge1xuICAgICAgICB0eXBlOlN0cmluZywgXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgdW5pcXVlOiBmYWxzZVxuICAgIH0sXG4gICAgdXNlcl9lbWFpbHM6W1xuICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOk9iamVjdFxuICAgICAgICB9XG4gICAgXSxcbiAgICBjb3Jwb3JhdGlvbl9wYXNzd29yZDoge1xuICAgICAgICB0eXBlOlN0cmluZywgXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgdW5pcXVlOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogXCJcIlxuICAgIH0sXG4gICBzZXJ2aWNlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZW51bTogc2VydmljZVZhbHVlcyxcbiAgICAgICAgZGVmYXVsdDogXCJcIlxuICAgIH0sXG4gICAgbG9nbzoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCJcbiAgICB9XG59KTtcblxuVXNlclNjaGVtYS5tZXRob2RzLm1hdGNoUGFzc3dvcmQgPSBhc3luYyBmdW5jdGlvbiAoZW50ZXJlZFBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGF3YWl0IGJjcnlwdC5jb21wYXJlKGVudGVyZWRQYXNzd29yZCwgdGhpcy5wYXNzd29yZCk7XG4gICAgfVxuICAgIFxuXG5sZXQgVXNlck1vZGVsID0gbW9uZ29vc2UubW9kZWxzLlVzZXJ8fCBtb25nb29zZS5tb2RlbCgnVXNlcicsIFVzZXJTY2hlbWEpOyAvLyBDcmVhdGUgYSBVc2VyIG1vZGVsXG5leHBvcnQgZGVmYXVsdCBVc2VyTW9kZWw7IC8vIEV4cG9ydCB0aGUgVXNlciBtb2RlbFxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiYmNyeXB0IiwiU2NoZW1hIiwic2VydmljZVZhbHVlcyIsIlVzZXJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInBhc3N3b3JkIiwia2V5IiwiZW1haWwiLCJvcmdfZW1haWwiLCJvcmdhbml6YXRpb24iLCJ1c2VyX2VtYWlscyIsIk9iamVjdCIsImNvcnBvcmF0aW9uX3Bhc3N3b3JkIiwiZGVmYXVsdCIsInNlcnZpY2UiLCJlbnVtIiwibG9nbyIsIm1ldGhvZHMiLCJtYXRjaFBhc3N3b3JkIiwiZW50ZXJlZFBhc3N3b3JkIiwiY29tcGFyZSIsIlVzZXJNb2RlbCIsIm1vZGVscyIsIlVzZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/models/User.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FsendEmail&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2FsendEmail.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();